# coding: utf-8

"""
    Talon.One API

    Use the Talon.One API to integrate with your application and to manage applications and campaigns:  - Use the operations in the [Integration API section](#integration-api) are used to integrate with our platform - Use the operation in the [Management API section](#management-api) to manage applications and campaigns.  ## Determining the base URL of the endpoints  The API is available at the same hostname as your Campaign Manager deployment. For example, if you access the Campaign Manager at `https://yourbaseurl.talon.one/`, the URL for the [updateCustomerSessionV2](https://docs.talon.one/integration-api#operation/updateCustomerSessionV2) endpoint is `https://yourbaseurl.talon.one/v2/customer_sessions/{Id}` 

    The version of the OpenAPI document: 
    Generated by OpenAPI Generator (https://openapi-generator.tech)

    Do not edit the class manually.
"""  # noqa: E501


from __future__ import annotations
import pprint
import re  # noqa: F401
import json

from pydantic import BaseModel, ConfigDict, Field, StrictBool, StrictInt, StrictStr, field_validator
from typing import Any, ClassVar, Dict, List, Optional
from typing_extensions import Annotated
from talon_one.models.attributes_settings import AttributesSettings
from talon_one.models.limit_config import LimitConfig
from typing import Optional, Set
from typing_extensions import Self

class UpdateApplication(BaseModel):
    """
    UpdateApplication
    """ # noqa: E501
    name: Annotated[str, Field(min_length=1, strict=True)] = Field(description="The name of this application.")
    description: Optional[StrictStr] = Field(default=None, description="A longer description of the application.")
    timezone: Annotated[str, Field(min_length=1, strict=True)] = Field(description="A string containing an IANA timezone descriptor.")
    currency: Annotated[str, Field(min_length=1, strict=True)] = Field(description="The default currency for new customer sessions.")
    case_sensitivity: Optional[StrictStr] = Field(default=None, description="The case sensitivity behavior to check coupon codes in the campaigns of this Application.", alias="caseSensitivity")
    attributes: Optional[Dict[str, Any]] = Field(default=None, description="Arbitrary properties associated with this campaign.")
    limits: Optional[List[LimitConfig]] = Field(default=None, description="Default limits for campaigns created in this application.")
    default_discount_scope: Optional[StrictStr] = Field(default=None, description="The default scope to apply `setDiscount` effects on if no scope was provided with the effect. ", alias="defaultDiscountScope")
    enable_cascading_discounts: Optional[StrictBool] = Field(default=None, description="Indicates if discounts should cascade for this Application.", alias="enableCascadingDiscounts")
    enable_flattened_cart_items: Optional[StrictBool] = Field(default=None, description="Indicates if cart items of quantity larger than one should be separated into different items of quantity one. ", alias="enableFlattenedCartItems")
    attributes_settings: Optional[AttributesSettings] = Field(default=None, alias="attributesSettings")
    sandbox: Optional[StrictBool] = Field(default=None, description="Indicates if this is a live or sandbox Application.")
    enable_partial_discounts: Optional[StrictBool] = Field(default=None, description="Indicates if this Application supports partial discounts.", alias="enablePartialDiscounts")
    default_discount_additional_cost_per_item_scope: Optional[StrictStr] = Field(default=None, description="The default scope to apply `setDiscountPerItem` effects on if no scope was provided with the effect. ", alias="defaultDiscountAdditionalCostPerItemScope")
    default_evaluation_group_id: Optional[StrictInt] = Field(default=None, description="The ID of the default campaign evaluation group to which new campaigns will be added unless a different group is selected when creating the campaign.", alias="defaultEvaluationGroupId")
    default_cart_item_filter_id: Optional[StrictInt] = Field(default=None, description="The ID of the default Cart-Item-Filter for this application.", alias="defaultCartItemFilterId")
    enable_campaign_state_management: Optional[StrictBool] = Field(default=None, description="Indicates whether the campaign staging and revisions feature is enabled for the Application.  **Important:** After this feature is enabled, it cannot be disabled. ", alias="enableCampaignStateManagement")
    __properties: ClassVar[List[str]] = ["name", "description", "timezone", "currency", "caseSensitivity", "attributes", "limits", "defaultDiscountScope", "enableCascadingDiscounts", "enableFlattenedCartItems", "attributesSettings", "sandbox", "enablePartialDiscounts", "defaultDiscountAdditionalCostPerItemScope", "defaultEvaluationGroupId", "defaultCartItemFilterId", "enableCampaignStateManagement"]

    @field_validator('case_sensitivity')
    def case_sensitivity_validate_enum(cls, value):
        """Validates the enum"""
        if value is None:
            return value

        if value not in set(['sensitive', 'insensitive-uppercase', 'insensitive-lowercase']):
            raise ValueError("must be one of enum values ('sensitive', 'insensitive-uppercase', 'insensitive-lowercase')")
        return value

    @field_validator('default_discount_scope')
    def default_discount_scope_validate_enum(cls, value):
        """Validates the enum"""
        if value is None:
            return value

        if value not in set(['sessionTotal', 'cartItems', 'additionalCosts']):
            raise ValueError("must be one of enum values ('sessionTotal', 'cartItems', 'additionalCosts')")
        return value

    @field_validator('default_discount_additional_cost_per_item_scope')
    def default_discount_additional_cost_per_item_scope_validate_enum(cls, value):
        """Validates the enum"""
        if value is None:
            return value

        if value not in set(['price', 'itemTotal', 'additionalCosts']):
            raise ValueError("must be one of enum values ('price', 'itemTotal', 'additionalCosts')")
        return value

    model_config = ConfigDict(
        populate_by_name=True,
        validate_assignment=True,
        protected_namespaces=(),
    )


    def to_str(self) -> str:
        """Returns the string representation of the model using alias"""
        return pprint.pformat(self.model_dump(by_alias=True))

    def to_json(self) -> str:
        """Returns the JSON representation of the model using alias"""
        # TODO: pydantic v2: use .model_dump_json(by_alias=True, exclude_unset=True) instead
        return json.dumps(self.to_dict())

    @classmethod
    def from_json(cls, json_str: str) -> Optional[Self]:
        """Create an instance of UpdateApplication from a JSON string"""
        return cls.from_dict(json.loads(json_str))

    def to_dict(self) -> Dict[str, Any]:
        """Return the dictionary representation of the model using alias.

        This has the following differences from calling pydantic's
        `self.model_dump(by_alias=True)`:

        * `None` is only added to the output dict for nullable fields that
          were set at model initialization. Other fields with value `None`
          are ignored.
        """
        excluded_fields: Set[str] = set([
        ])

        _dict = self.model_dump(
            by_alias=True,
            exclude=excluded_fields,
            exclude_none=True,
        )
        # override the default output from pydantic by calling `to_dict()` of each item in limits (list)
        _items = []
        if self.limits:
            for _item_limits in self.limits:
                if _item_limits:
                    _items.append(_item_limits.to_dict())
            _dict['limits'] = _items
        # override the default output from pydantic by calling `to_dict()` of attributes_settings
        if self.attributes_settings:
            _dict['attributesSettings'] = self.attributes_settings.to_dict()
        return _dict

    @classmethod
    def from_dict(cls, obj: Optional[Dict[str, Any]]) -> Optional[Self]:
        """Create an instance of UpdateApplication from a dict"""
        if obj is None:
            return None

        if not isinstance(obj, dict):
            return cls.model_validate(obj)

        _obj = cls.model_validate({
            "name": obj.get("name"),
            "description": obj.get("description"),
            "timezone": obj.get("timezone"),
            "currency": obj.get("currency"),
            "caseSensitivity": obj.get("caseSensitivity"),
            "attributes": obj.get("attributes"),
            "limits": [LimitConfig.from_dict(_item) for _item in obj["limits"]] if obj.get("limits") is not None else None,
            "defaultDiscountScope": obj.get("defaultDiscountScope"),
            "enableCascadingDiscounts": obj.get("enableCascadingDiscounts"),
            "enableFlattenedCartItems": obj.get("enableFlattenedCartItems"),
            "attributesSettings": AttributesSettings.from_dict(obj["attributesSettings"]) if obj.get("attributesSettings") is not None else None,
            "sandbox": obj.get("sandbox"),
            "enablePartialDiscounts": obj.get("enablePartialDiscounts"),
            "defaultDiscountAdditionalCostPerItemScope": obj.get("defaultDiscountAdditionalCostPerItemScope"),
            "defaultEvaluationGroupId": obj.get("defaultEvaluationGroupId"),
            "defaultCartItemFilterId": obj.get("defaultCartItemFilterId"),
            "enableCampaignStateManagement": obj.get("enableCampaignStateManagement")
        })
        return _obj


